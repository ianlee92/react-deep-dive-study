### 📅 2024년 3월 27일

# 📚 6장 리액트 개발 도구로 디버깅하기

### p.402~403

- 리액트 개발자 도구의 아이콘이 회색으로 표시된다면 리액트 개발자 도구를 활용할 수 없는 페이지라는 뜻이다.
- 빨간색으로 표시된다면 현재 웹페이지가 리액트 개발자 모드로 실행되고 있다는 뜻이며 원래의 리액트 색상으로 표시된다면 리액트 프로덕션 모드로 빌드되어 실행되고 있다는 뜻이다.

### p.403

- 크롬 개발자 도구에 리액트 개발 도구를 설치하면 Components와 Profiler가 추가된 것을 확인할 수 있다.
- 이 두 탭이 바로 리액트 개발자 도구에서 제공하는 디버그 도구다.

### 컴포넌트 (p.403~416)

- Components 탭에서는 현재 리액트 애플리케이션의 컴포넌트 트리를 확인할 수 있다.
- 단순히 컴포넌트의 구조뿐만 아니라 props와 내부 hooks 등 다양한 정보를 확인할 수 있다.
- 컴포넌트 트리

  - Components의 왼쪽 영역은 해당 리액트 페이지의 컴포넌트 트리를 나타낸다.
  - 기명 함수로 선언되어 컴포넌트명을 알 수 있다면 해당 컴포넌트명을 보여주고, 만약 익명 함수로 선언돼 있다면 Anonymous라는 이름으로 컴포넌트를 보여준다.
  - 익명 함수를 default로 export한 경우, memo를 사용해 익명 함수로 만든 컴포넌트를 감싼 경우, 고차 컴포넌트로 감싼 HOCComponent의 경우 모두 Anonymous로 선언돼 있다.
  - 컴포넌트를 기명 함수로 선언하는 것은 개발 도구에서 확인하는 데 많은 도움을 준다.
  - 만약 함수를 기명 함수로 바꾸기 어렵다면 함수에 displayName 속성을 추가하는 방법도 있다.

    ```tsx
    const MemoizedComponent = memo(function () {
      return <>MemoizedComponent</>;
    });

    MemoizedComponent.displayName = "메모 컴포넌트입니다.";
    ```

- 컴포넌트명과 props
  - 왼쪽 컴포넌트 트리에서 컴포넌트르 선택했을 때 오른쪽은 해당 컴포넌트에 대한 자세한 정보를 보여주는 영역이다.
  - 해당 컴포너트가 받은 props를 확인할 수 있고 단순한 원시값뿐만 아니라 함수도 포함돼 있다.
  - 컴포넌트에서 사용 중인 훅 정보는 use가 생략된 이름으로 나타난다. (ex: useState -> State, useEffect -> Effect)
  - 리액트에서 제공하는 훅이 아닌 경우 즉, 사용자 정의 훅도 useXXX로 선언돼 있다면 use가 생략된 이름으로 나타난다. (ex: useCounter -> Counter)
  - 대부분 useEffect에는 익명 함수를 인수로 넘겨주기 때문에 여러 개 선언돼 있다면 어떤 훅인지 구별이 어렵기에 기명 함수로 선언하면 개발 도구를 더욱 유용하게 이용할 수 있다.
  - rendered by는 해당 컴포넌트를 렌더링한 주체가 누구인지 확인할 수 있다. 프로덕션 모드에서는 react-dom의 버전만 확인 가능하지만, 개발 모드에서는 해당 컴포넌트를 렌더링한 부모 컴포넌트까지 확인할 수 있다.

### 프로파일러 (p.417~430)

- 컴포넌트 메뉴가 정적인 현재 리액트 컴포넌트 트리의 내용을 디버깅하기 위한 도구라면 프로파일러는 리액트가 렌더링하는 과정에서 발생하는 상황을 확인하기 위한 도구다.
- 즉 리액트 애플리케이션이 렌더링되는 과정에서 어떤 컴포넌트가 렌더링됐는지, 또 몇 차례나 렌더링이 일어났으며 어떤 작업에서 오래 걸렸는지 등 컴포넌트 렌더링 과정에서 발생하는 일을 확인할 수 있다.
- 렌더링 과정에 개입해 디버깅에 필요한 내용을 기록해야 하기 때문에 프로덕션 빌드로 실행되는 리액트 애플리케이션에서는 사용할 수 없다.
- General 탭의 Highlight updates when components render: 컴포넌트가 렌더링될 때마다 해당 컴포넌트에 하이라이트를 표시.
- 프로파일링
  - 첫 번째 버튼 Start Profiling(프로파일링 시작) 버튼을 누르면 프로파일링이 시작되고 적색 동그라미로 바뀌며 다시 누르면 프로파일링이 중단되고 결과가 나타난다.
  - 두 번째 버튼 Reload and Start profiling(새로고침 후 프로파일링 시작)은 위와 유사하지만 웹페이지가 새로고침되면서 동시에 프로파일링이 시작된다.
  - 세 번째 버튼 Stop Profiling(프로파일링 종료) 버튼은 프로파일링된 현재 내용을 모두 지우는 버튼으로 기록을 모두 삭제할 수 있다.
  - 네 번째, 다섯 번째 버튼은 Load Profile(프로파일 불러오기), Save Profile(프로파일 저장하기) 버튼으로 프로파일링 결과를 저장하고 불러온느 버튼이다.
    - 사용자의 브라우저에 해당 프로파일링 정보가 담긴 JSON 파일이 다운로드되며 다시 로딩해 프로파일링 정보를 불러올 수도 있다.
- Flamegraph탭은 불꽃 모양의 아이콘을 가진 탭으로 렌더 커밋별로 어떠한 작업이 일어났는지 나타낸다. 너비가 넓을수록 해당 컴포넌트를 렌더링하는 데 오래 걸렸다는 의미다.
- 노란색에 가까울수록 렌더링에 오래 걸린 컴포넌트이며, 녹색에 가까울수록 빠르게 렌더링된 컴포넌트다. 회색으로 표시된 컴포넌트는 아예 렌더링되지 않은 컴포넌트다.
- Ranked는 해당 커밋에서 렌더링하는 데 오랜 시간이 걸린 컴포넌트를 순서대로 나열한 그래프다. 렌더링되지 않은 정보는 필터링해서 보여주기 때문에 좀 더 간결하게 원하는 정보를 파악할 수 있다.
- Timeline은 시간이 지남에 따라 컴포넌트에서 어떤 일이 일어났는지를 확인할 수 있다. 시간의 흐름에 따라 리액트가 작동하는 내용을 추적하는 데 유용하다.
- 렌더링 정보에 대해 확인하려면 우측 상단 그래프에서 오른쪽 화살표를 누르거나 보고 싶은 커밋을 클릭해 "What caused this update?"를 눌러 해당 컴포넌트가 렌더링된 이유를 살펴볼 수 있다.

### p.430

- 리액트 개발 도구를 활용하면 정적으로 생성된 컴포넌트 트리를 보는 것에서부터 프로파일링을 통해 리액트 애플리케이션이 시간이 지남에 따라 어떤 식으로 작동하는지, 불필요한 리렌더링이 일어나고 있는지 등을 확인할 수 있다.

### p.431

- 리액트 컴포넌트 구조가 복잡해지기 전에 틈틈이 리액트 개발 도구를 활용해 디버깅을 수행해 하는 것이 좋다.
- 개발이 완성된 애플리케이션에 무작정 개발 도구를 열어본다면 생각보다 많은 시간이 소요되고 한눈에 내용을 파악하기도 어려워 거부감을 느낄 수도 있다.

# 📚 7장 크롬 개발자 도구를 활용한 애플리케이션 분석
