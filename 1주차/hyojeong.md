# 모던 리액트 딥다이브 1주차 3월 13일

## 1장 리액트를 위한 자바스크립트

### 1.1 동등비교

prop, dependency array 에서 동등 비교를 통해 렌더링을 제어함

- JS의 데이터 타입: 윈시값 / 참조값

- 리액트에서 비교하는 방법
  - object.is -> 1단계 얕은 비교
  * 리액트의 비교는 불안정하다

### 1.2 함수 : 계산이나 실행을 표현하고 블록으로 감싸서 실행 단위로 묶어 놓은것.

- 종류 : 선언식, 표현식 / Function 생성자 / 화살표 함수
  - 즉시 실행 함수, 고차함수(map)

* 주의할 점 : side-effect 없게 만든다 = 순수하게 만든다, 작게 만든다. 유추하기 쉬운 이름

<!-- - 클래스 : 넘김 -->

### 1.4 클로저 : 함수가 선언되었을때 어휘적 환경

- 어휘적 환경 : 변수가 선언된 위치에 따라 정적으로 결정되는 변수의 스코프
  - 전역 / 함수
- JS는 함수 레벨 스코프를 가지고있음
- 리액트에서 대표적으로 클로저를 사용 = useState

* 클로저는 비용이 든다 (외부 환경을 기억하고 내부에서 쓰는건 비용듬)

### 1.5 이벤트 루프와 비동기 통신의 이해

- 프로세스와 스레드
  - 하나의 프로그램에는 하나의 프로세스 할당됨 스레드는 더 작은 단위임
    스레드 끼리 메모리를 공유할 수 있음 그래서 여러작업 동시 수행 가능
- JS 는 싱글 스레드임. 초기 Js는 단순한 기능을 구현하기 위해 만든거라 멀티 스레드까지 필요없었음
- 이벤트 루프: JS 런타임 외부에서 비동기 실행을 돕기 위해 만들어진 장치. 호출 스택이 비었는지 확인하고 테스크 큐에 대기중인 함수가있는지 확인하고 오래된 것부터 순차적으로 꺼내와서 실행함.
  - 호출 스택 : JS에서 해야할 일(수행할 코드, 함수)을 순차적으로 담아두는 스택
  - 테스크 큐 : 실행해야하는 테스트의 집합
- 테스크 큐, 마이크로 테스크 큐
  - 처리 우선순위 : 마이크로 테스크 큐 > 테스크 큐
  - 테스크 큐 : setTimeout 등등
  - 마이크로 테스크 큐 : Promise 등등

* 브라우저 렌더링은 마이크로 테스트큐 <-> 테스크 큐 사이에서 일어남

### 1.6 리액트에서 자주 사용하는 JS 문법

- Destructuring
- ...rest 전개 구문
- 객체 초기자
- Array 메서드 : map, filter, forEach...
- 삼항 조건 연산자 : 조건부 렌더링에 사용할 수 있음

### 1.7 타입 스크립트

- TS? JS에 타입을 가미한 슈퍼셋
- 활용법
  - any 대신 unknown
  - 타입가드
  - 제네릭

---

## 2장 리액트 핵심요소 깊게 살펴보기

### 2.1 JSX?

- JSX란 JS에서 XML 트리 구조를 쉽게 표현하기 위해 만들어진 문법
- JSX -> REact.createElement 로 변환된다!

### 2.2 가상 DOM과 파이버

- 파이버
  - JS 객체 컴포넌트 요소와 1:1로 매칭됨
  - state 변경 또는 생명 주기 함수가 실행되면 실행됨
  - 처리 우선 순위를 정해서 처리함
- 파이버 트리
  - current tree, workInProgress tree
  - workInProgress tree 작업이 끝나면 포인터를 옮긴다. = 더블 버퍼링
- 파이버 작업 순서
  - begin work -> complete work -> return

* 가상 DOM은 웹. 파이버는 리액트에서 쓰는 개념

<!-- - 클래스 컴포넌트, 함수형 컴포넌트 : 넘어감 -->

### 2.4 렌더링은 어떻게 일어나는가?

- 렌더링 : 리액트 어플리케이션의 모든 컴포넌트가 prop과 state를 기반으로 어떻게 UI를 구성하고 어떤 DOM 결과를 프라우저에 제공할 것인지 계상하는 과정을 뜻함
  - 렌더링이 일어나는 이유
    1. 최초 렌더링
    2. 리렌더링 : key prop, setState, dispatch, 부모 컴포넌트 리렌더링...
- 렌더 단계 : 컴포넌트 변경 사항 계산하는 단계
- 커밋 단계 : 렌더 변경 사항을 실제 DOM에 적용하는 단계

### 2.5 메모이제이션 (WIP)

- 필요한 곳에만 추가하자 : 메모이제이션도 비용이다.
- 렌더링은 비싸다 다 쓰자 : 메모이제이션을 하지 않은 것보다 했을때 더 많은 이점을 누릴 수 있다.
